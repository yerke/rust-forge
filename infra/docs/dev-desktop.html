<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Dev Desktops - Rust Forge</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="Supplemental documentation for contributing to The Rust Programming Language">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../index.html">Overview</a></li><li class="chapter-item expanded "><a href="../../platforms/index.html">Platforms</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../platforms/twitter.html">Twitter</a></li><li class="chapter-item expanded "><a href="../../platforms/discord.html">Discord</a></li><li class="chapter-item expanded "><a href="../../platforms/email.html">Email</a></li><li class="chapter-item expanded "><a href="../../platforms/github.html">GitHub</a></li><li class="chapter-item expanded "><a href="../../platforms/zulip.html">Zulip</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../platforms/zulip/moderation.html">Moderation</a></li></ol></li><li class="chapter-item expanded "><a href="../../platforms/blogs.html">Blogs</a></li><li class="chapter-item expanded "><a href="../../platforms/calendars.html">Calendars</a></li></ol></li><li class="chapter-item expanded "><a href="../../triagebot/index.html">Triagebot</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../triagebot/agenda.html">Agenda Generator</a></li><li class="chapter-item expanded "><a href="../../triagebot/issue-assignment.html">Issue Assignment</a></li><li class="chapter-item expanded "><a href="../../triagebot/pr-assignment.html">PR Assignment</a></li><li class="chapter-item expanded "><a href="../../triagebot/pr-assignment-tracking.html">Tracking PR assignment</a></li><li class="chapter-item expanded "><a href="../../triagebot/autolabels.html">Autolabels</a></li><li class="chapter-item expanded "><a href="../../triagebot/close.html">Close</a></li><li class="chapter-item expanded "><a href="../../triagebot/doc-updates.html">Documentation Updates</a></li><li class="chapter-item expanded "><a href="../../triagebot/github-releases.html">GitHub Releases</a></li><li class="chapter-item expanded "><a href="../../triagebot/glacier.html">Glacier</a></li><li class="chapter-item expanded "><a href="../../triagebot/transfer.html">Issue Transfer</a></li><li class="chapter-item expanded "><a href="../../triagebot/labeling.html">Labeling</a></li><li class="chapter-item expanded "><a href="../../triagebot/major-changes.html">Major Changes</a></li><li class="chapter-item expanded "><a href="../../triagebot/mentions.html">Mentions</a></li><li class="chapter-item expanded "><a href="../../triagebot/no-merge.html">No Merge Policy</a></li><li class="chapter-item expanded "><a href="../../triagebot/nominate.html">Nominate</a></li><li class="chapter-item expanded "><a href="../../triagebot/note.html">Note</a></li><li class="chapter-item expanded "><a href="../../triagebot/notifications.html">Notifications</a></li><li class="chapter-item expanded "><a href="../../triagebot/pinging.html">Pinging</a></li><li class="chapter-item expanded "><a href="../../triagebot/requesting-prioritization.html">Requesting Prioritization</a></li><li class="chapter-item expanded "><a href="../../triagebot/review-submitted.html">Review Changes Requested</a></li><li class="chapter-item expanded "><a href="../../triagebot/review-requested.html">Review Requested</a></li><li class="chapter-item expanded "><a href="../../triagebot/rustc-commit-list.html">Rustc Commit Tracking</a></li><li class="chapter-item expanded "><a href="../../triagebot/shortcuts.html">Shortcuts</a></li><li class="chapter-item expanded "><a href="../../triagebot/triage-dashboard.html">Triagebot Dashboard</a></li><li class="chapter-item expanded "><a href="../../triagebot/zulip-meeting.html">Zulip Meeting Management</a></li><li class="chapter-item expanded "><a href="../../triagebot/zulip-notifications.html">Zulip Notifications</a></li></ol></li><li class="chapter-item expanded "><a href="../../community/index.html">Community</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../community/survey-faq.html">State of Rust Survey FAQ</a></li></ol></li><li class="chapter-item expanded "><a href="../../compiler/index.html">Compiler</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../compiler/cross-compilation/index.html">Cross Compilation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../compiler/cross-compilation/windows.html">Windows</a></li></ol></li><li class="chapter-item expanded "><a href="../../compiler/cross-team-collaboration.html">Cross-team Collaboration</a></li><li class="chapter-item expanded "><a href="../../compiler/reviews.html">Review policies</a></li><li class="chapter-item expanded "><a href="../../compiler/new_option.html">So you want to add a new option to rustc?</a></li><li class="chapter-item expanded "><a href="../../compiler/mcp.html">Major Change Proposals</a></li><li class="chapter-item expanded "><a href="../../compiler/membership.html">Membership</a></li><li class="chapter-item expanded "><a href="../../compiler/prioritization.html">Prioritization</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../compiler/prioritization/procedure.html">Procedure</a></li><li class="chapter-item expanded "><a href="../../compiler/prioritization/priority-levels.html">Priority Levels</a></li></ol></li><li class="chapter-item expanded "><a href="../../compiler/notification-groups.html">Notification groups</a></li><li class="chapter-item expanded "><a href="../../compiler/triage-meeting.html">Triage Meeting</a></li><li class="chapter-item expanded "><a href="../../compiler/steering-meeting.html">Steering Meeting</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../compiler/steering-meeting/submit.html">Submitting a proposal</a></li><li class="chapter-item expanded "><a href="../../compiler/steering-meeting/how-to-run-planning.html">How to run the planning meeting</a></li><li class="chapter-item expanded "><a href="../../compiler/steering-meeting/how-to-run-design.html">How to run a design meeting</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../crates-io/index.html">crates.io</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../crates-io/crate-removal.html">Crate removal</a></li><li class="chapter-item expanded "><a href="../../crates-io/db-maintenance.html">Database maintenance</a></li></ol></li><li class="chapter-item expanded "><a href="../../docs-rs/index.html">docs.rs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../docs-rs/add-dependencies.html">Adding dependencies to the build environment</a></li><li class="chapter-item expanded "><a href="../../docs-rs/self-hosting.html">Self-hosting a docs.rs instance</a></li><li class="chapter-item expanded "><a href="../../docs-rs/maintenance.html">Maintenance procedures</a></li></ol></li><li class="chapter-item expanded "><a href="../../governance/index.html">Governance</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../governance/council.html">Leadership Council</a></li><li class="chapter-item expanded "><a href="../../governance/moderation.html">Moderation</a></li></ol></li><li class="chapter-item expanded "><a href="../../policies/index.html">Policies</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../policies/crate-ownership.html">Crate ownership policy</a></li></ol></li><li class="chapter-item expanded "><a href="../../infra/index.html">Infrastructure</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../infra/other-installation-methods.html">Other Installation Methods</a></li><li class="chapter-item expanded "><a href="../../infra/archive-stable-version-installers.html">Archive of Rust Stable Standalone Installers</a></li><li class="chapter-item expanded "><a href="../../infra/channel-layout.html">Release Channel Layout</a></li><li class="chapter-item expanded "><a href="../../infra/service-infrastructure.html">Service Infrastructure</a></li><li class="chapter-item expanded "><a href="../../infra/team-maintenance.html">Team Maintenance</a></li><li class="chapter-item expanded "><a href="../../infra/toolstate.html">The Toolstate System</a></li><li class="chapter-item expanded "><a href="../../infra/policies/index.html">Policies</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../infra/policies/broken-nightlies.html">Broken nightlies</a></li></ol></li><li class="chapter-item expanded "><a href="../../infra/guidelines/index.html">Guidelines</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../infra/guidelines/static-websites.html">Static websites</a></li></ol></li><li class="chapter-item expanded "><a href="../../infra/docs/index.html">Documentation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../infra/docs/aws-access.html">AWS access for team members</a></li><li class="chapter-item expanded "><a href="../../infra/docs/aws-access-management.html">AWS access management</a></li><li class="chapter-item expanded "><a href="../../infra/docs/aws-regions.html">AWS regions</a></li><li class="chapter-item expanded "><a href="../../infra/docs/bastion.html">Bastion server</a></li><li class="chapter-item expanded "><a href="../../infra/docs/bors.html">Bors</a></li><li class="chapter-item expanded "><a href="../../infra/docs/cdn.html">CDN</a></li><li class="chapter-item expanded "><a href="../../infra/docs/crater-agents.html">Crater agents</a></li><li class="chapter-item expanded "><a href="../../infra/docs/gha-self-hosted.html">Custom GitHub Actions runners</a></li><li class="chapter-item expanded "><a href="../../infra/docs/dev-desktop.html" class="active">Dev Desktops</a></li><li class="chapter-item expanded "><a href="../../infra/docs/dev-desktop-github-app.html">GitHub App for dev-desktops</a></li><li class="chapter-item expanded "><a href="../../infra/docs/discord-mods-bot.html">Discord moderation bot</a></li><li class="chapter-item expanded "><a href="../../infra/docs/dns.html">Domain names and DNS</a></li><li class="chapter-item expanded "><a href="../../infra/docs/docs-rs.html">docs.rs</a></li><li class="chapter-item expanded "><a href="../../infra/docs/ecs-services.html">ECS services management</a></li><li class="chapter-item expanded "><a href="../../infra/docs/monitoring.html">Monitoring</a></li><li class="chapter-item expanded "><a href="../../infra/docs/rust-bots.html">rust-bots server</a></li><li class="chapter-item expanded "><a href="../../infra/docs/rustc-ci.html">rust-lang/rust CI</a></li><li class="chapter-item expanded "><a href="../../infra/docs/sentry.html">Sentry</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../lang/index.html">Language</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../lang/rfc-merge-procedure.html">RFC Merge Procedure</a></li><li class="chapter-item expanded "><a href="../../lang/triage-meeting-procedure.html">Triage Meeting Procedure</a></li></ol></li><li class="chapter-item expanded "><a href="../../libs/index.html">Libs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../libs/maintaining-std.html">Maintaining the standard library</a></li></ol></li><li class="chapter-item expanded "><a href="../../release/index.html">Release</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../release/backporting.html">Backporting</a></li><li class="chapter-item expanded "><a href="../../release/release-notes.html">Preparing Release Notes</a></li><li class="chapter-item expanded "><a href="../../release/process.html">Release Process</a></li><li class="chapter-item expanded "><a href="../../release/rollups.html">Rollup Procedure</a></li><li class="chapter-item expanded "><a href="../../release/triage-procedure.html">Triage Procedure</a></li><li class="chapter-item expanded "><a href="../../release/issue-triaging.html">Issue Triaging</a></li><li class="chapter-item expanded "><a href="../../release/crater.html">Triaging Crater Runs</a></li></ol></li><li class="chapter-item expanded "><a href="../../editions/edition-releases.html">Edition Releases</a></li><li class="chapter-item expanded "><a href="../../archive/index.html">Archive</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../archive/fott.html">Friends of the Tree</a></li><li class="chapter-item expanded "><a href="../../archive/release-history.html">Release History</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Rust Forge</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rust-lang/rust-forge" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/rust-lang/rust-forge/edit/master/src/infra/docs/dev-desktop.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="dev-desktops"><a class="header" href="#dev-desktops">Dev Desktops</a></h1>
<p>The dev desktops provide maintainers and contributors to the Rust Project with
free access to high-powered cloud compute. They are part of the
<a href="https://foundation.rust-lang.org/news/2021-11-16-news-announcing-cloud-compute-initiative/">Cloud Compute Program</a> by the <a href="https://foundation.rust-lang.org/">Rust Foundation</a>.</p>
<div class="table-wrapper"><table><thead><tr><th>Machine</th><th>Architecture</th><th>Perf enabled</th><th>Location</th></tr></thead><tbody>
<tr><td><code>dev-desktop-eu-1</code></td><td><code>aarch64</code></td><td>Yes</td><td>Germany</td></tr>
<tr><td><code>dev-desktop-eu-2</code></td><td><code>amd64</code></td><td>No</td><td>Netherlands</td></tr>
<tr><td><code>dev-desktop-us-1</code></td><td><code>aarch64</code></td><td>Yes</td><td>N. Virgina, US</td></tr>
<tr><td><code>dev-desktop-us-2</code></td><td><code>amd64</code></td><td>No</td><td>Washington, US</td></tr>
</tbody></table>
</div>
<h2 id="how-to-apply-to-the-program"><a class="header" href="#how-to-apply-to-the-program">How to apply to the program</a></h2>
<p>At this time, access to the program and the compute instances is limited to
maintainers and core contributors of the Rust Project. While the program is
under development, it is limited to <a href="https://github.com/search?q=repo%3Arust-lang%2Fteam+path%3Ateams%2F*.toml+dev-desktop&amp;type=code&amp;ref=advsearch">certain teams</a>. If you are in one of these
teams, you should automatically have access.</p>
<p>If you feel like your work on the Rust project would be significantly improved
by access to a powerful build machine, reach out to <a href="mailto:infra@rust-lang.org">infra@rust-lang.org</a> with
the following information:</p>
<ul>
<li>Your GitHub handle</li>
<li>A short description of how you would use and benefit from the dev desktops</li>
</ul>
<h2 id="how-to-connect-to-a-dev-desktop"><a class="header" href="#how-to-connect-to-a-dev-desktop">How to connect to a dev desktop</a></h2>
<p>Each user has their own account on the dev desktops. The account is named after
the user’s GitHub handle, with <code>gh-</code> as a prefix. For example, a user with the
GitHub handle <code>user</code> will have a user account with the name <code>gh-user</code> on the dev
desktop.</p>
<p>Users can connect to the dev desktop with SSH. The dev desktops use public key
authentication, and automatically fetch the user’s public keys from GitHub.</p>
<p>You can connect to the instance with the following command:</p>
<pre><code class="language-shell">ssh &lt;your-username&gt;@&lt;name&gt;.infra.rust-lang.org
</code></pre>
<p>Replace <code>&lt;name&gt;</code> with the machine name from the table at the top of the page.
For example, connect to <code>dev-desktop-eu-1</code> using the hostname
<code>dev-desktop-eu-1.infra.rust-lang.org</code>.</p>
<p>If you don’t have a public key on GitHub, read the following guides that explain
how to create an SSH key and add it to your GitHub account. It might take a few
minutes after the key has been added before the dev desktops get updated.</p>
<ul>
<li><a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">Generating a new SSH key and adding it to the ssh-agent</a></li>
<li><a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account">Adding a new SSH key to your GitHub account</a></li>
</ul>
<p>To make the command easier, you can configure an alias in your <code>~/.ssh/config</code> like so:</p>
<pre><code class="language-ssh-config">Host rustvm
  User &lt;your-username&gt;
  HostName &lt;name&gt;.infra.rust-lang.org
</code></pre>
<p>Then you can connect with <code>ssh rustvm</code>.</p>
<h2 id="how-to-set-up-your-account"><a class="header" href="#how-to-set-up-your-account">How to set up your account</a></h2>
<p>When connecting to the machine for the first time, there are a few things you
might want to do.</p>
<p>First, check that your Git username and email are configured correctly.</p>
<pre><code class="language-shell">git config -l --global
</code></pre>
<p>You can configure your username and email address with:</p>
<pre><code class="language-shell">git config --global user.name &quot;Your name&quot;
git config --global user.email &quot;your-email&quot;
</code></pre>
<h2 id="how-to-customize-your-shell"><a class="header" href="#how-to-customize-your-shell">How to customize your shell</a></h2>
<p>You can set your default shell on the dev desktops by adding yourself to a
configuration file in the <a href="https://github.com/rust-lang/simpleinfra/blob/dbf839ef25155df1f33c18f151283436b0f70f3b/ansible/roles/dev-desktop/defaults/main.yml#L12:L16"><code>rust-lang/simpleinfra</code></a>
repository. Open <code>ansible/roles/dev-desktop/defaults/main.yml</code>, look for the
variable <code>vars_user_config</code>, and add yourself to the list.</p>
<pre><code class="language-yaml">vars_user_config:
  - username: gh-jdno
    shell: /usr/bin/zsh
  - username: gh-WaffleLapkin
    shell: /usr/bin/fish
</code></pre>
<p>Open a pull request and request a review from <code>@rust-lang/infra</code> (or ping us in
<code>#t-infra</code> on Zulip).</p>
<p>After the pull request is merged, an infrastructure admin has to deploy the
new configuration to the dev desktops. Only after that will your default shell
be changed.</p>
<h2 id="how-to-install-a-rust-toolchain"><a class="header" href="#how-to-install-a-rust-toolchain">How to install a Rust toolchain</a></h2>
<p>The dev desktops don’t have Rust pre-installed, but instead make it easy to
install a specific toolchain from a local repository or worktree.</p>
<p>First, you want to run the following command to install <code>rustup</code>:</p>
<pre><code class="language-shell">/usr/local/bin/init.sh
</code></pre>
<p>If you don’t want or need to work with your own version of Rust, you can skip
the next section and start working.</p>
<p>If you haven’t done so yet, open the <a href="https://github.com/rust-lang/rust">rust-lang/rust</a> repository on GitHub and
create a fork in your personal account. Then connect to the dev desktop and run
the following script:</p>
<pre><code class="language-shell">/usr/local/bin/setup_rust.sh
</code></pre>
<p>The script will clone your personal fork to the dev desktop, check out the
latest version from <a href="https://github.com/rust-lang/rust">rust-lang/rust</a>, and compile it. Once that’s done, it will
link the stages so that you can work with them locally.</p>
<p>The directory contains more scripts to manage worktrees and Rust versions. Run
<code>help.sh</code> to get a list and a short description of them.</p>
<h2 id="how-to-interact-with-github"><a class="header" href="#how-to-interact-with-github">How to interact with GitHub</a></h2>
<p>The dev desktops are designed to work with repositories on GitHub that belong to
your user account. A GitHub App is used to protect your credentials and give you
granular control over the repositories that the dev desktops can access.</p>
<p>First, go to <a href="https://github.com/apps/rust-cloud-vms">https://github.com/apps/rust-cloud-vms</a> to give the app access to
your repositories. It’s recommended to only grant access to the repositories
that you want to use on the dev desktop, e.g. your fork of <code>rust-lang/rust</code>.</p>
<p>Then connect to the dev desktop and clone the repository that you want to work
on with HTTPS. From there, you can work with the repository like you would
normally do.</p>
<p>Under the hood, the GitHub App acts as a credentials helper for Git and
generates temporary access tokens that are scoped to the permissions that you
have granted the application. If you get an error, review the permissions and
ensure that the app is allowed to access your repository.</p>
<h2 id="how-to-set-up-remote-development-in-visual-studio-code"><a class="header" href="#how-to-set-up-remote-development-in-visual-studio-code">How to set up remote development in Visual Studio Code</a></h2>
<p>Most modern code editors provide support for remote development via SSH. This
can be used to write code locally, but execute it inside the dev desktop. While
the configuration will differ slightly, the following example for
<a href="https://code.visualstudio.com/">Visual Studio Code</a> should be applicable to other editors as well.</p>
<p>Setting up remote development with VS Code is pretty straightforward, and is
described in detail in VS Code’s documentation: <a href="https://code.visualstudio.com/docs/remote/ssh">Remote Development using SSH</a>.
In summary:</p>
<ol>
<li>SSH into the dev desktop and clone the repository that you want to work on to
a local folder</li>
<li>Then open VS Code on your machine and install
the <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack">Remote Development Extension Pack</a></li>
<li>Open the command palette and search for “Remote-SSH: Connect to host”</li>
<li>Enter your username and the instance name (<code>&lt;your-username&gt;@&lt;instance&gt;</code>)</li>
<li>Select the path for the cloned repository from step 1</li>
<li>Install any extensions that you want to run on the server (e.g.
rust-analyzer)</li>
<li>Use VS Code to run or debug the code remotely</li>
</ol>
<h2 id="how-to-request-new-packages-and-tools"><a class="header" href="#how-to-request-new-packages-and-tools">How to request new packages and tools</a></h2>
<p>If you need a specific tool or package that is not installed on the dev
desktops, you can request its installation by opening a pull request against
the <a href="https://github.com/rust-lang/simpleinfra">rust-lang/simpleinfra</a> repository. The Ansible role <a href="https://github.com/rust-lang/simpleinfra/blob/master/ansible/roles/dev-desktop"><code>dev-desktop</code></a>
contains a tasks called <a href="https://github.com/rust-lang/simpleinfra/blob/master/ansible/roles/dev-desktop/tasks/dependencies.yml"><code>dependencies.yml</code></a>
that lists the system packages that are installed on the machines. Add the
required package to this list, open a pull request, and ping <code>@rust-lang/infra</code>
for a review.</p>
<p>It helps to check <a href="https://packages.ubuntu.com/">https://packages.ubuntu.com/</a> first and make sure that the
package is available for both <code>arm64</code> and <code>amd64</code> architectures. The dev
desktops are currently running Ubuntu 22.04 LTS.</p>
<h2 id="available-disk-space"><a class="header" href="#available-disk-space">Available disk space</a></h2>
<p>Every user has a quota of how much disk space they can use.
Currently, the quota is set to
<a href="https://github.com/rust-lang/simpleinfra/blob/8a59e4faeb75a09b072671c74a7cb70160ebef50/ansible/roles/dev-desktop/defaults/main.yml#L7">150GB</a>.</p>
<p>Exceeding the quota will result in the error <code>Disk quota exceeded (os error 122)</code>.</p>
<p>The <a href="https://rustc-dev-guide.rust-lang.org/building/how-to-build-and-run.html#remarks-on-disk-space">remarks on disk space</a> section of the rustc dev guide contains some tips on how to clean your disk space.</p>
<h2 id="how-to-give-feedback-and-report-issues"><a class="header" href="#how-to-give-feedback-and-report-issues">How to give feedback and report issues</a></h2>
<p>If you experience any problems with the dev desktops, or have feedback and
suggestions, get in touch with the <a href="https://www.rust-lang.org/governance/teams/infra">infrastructure team</a>:</p>
<p><a href="https://rust-lang.zulipchat.com/#narrow/stream/t-infra">#t-infra on Zulip</a></p>
<p>We might ask you to create an issue in the <a href="https://github.com/rust-lang/simpleinfra">rust-lang/simpleinfra</a> repository.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../infra/docs/gha-self-hosted.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../infra/docs/dev-desktop-github-app.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../infra/docs/gha-self-hosted.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../infra/docs/dev-desktop-github-app.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../js/moment.min.js"></script>
        <script src="../../js/index.js"></script>


    </div>
    </body>
</html>
